<%- include('../partials/header') %>

    <!-- Page Hero -->
    <section class="page-hero">
      <div class="container">
        <p class="eyebrow">Events</p>
        <h1>Join us at our <em>upcoming events</em>.</h1>
        <p class="page-lead">From workshops to fundraisers, there's always something happening at Ella Rises.</p>
        <% if (user && user.role === 'manager') { %>
          <div class="hero-actions">
            <a href="/manage/events" class="btn btn-primary">Manage Events</a>
            <a href="/manage/events/new" class="btn btn-outline">+ Add New Event</a>
          </div>
        <% } %>
      </div>
    </section>

    <!-- Events List -->
    <section class="section">
      <div class="container">
        <% if (events && events.length > 0) { %>
          <div class="events-list">
            <% events.forEach(event => { 
              const eventDate = event.eventDate ? new Date(event.eventDate) : null;
            %>
              <article class="event-card">
                <div class="event-date">
                  <% if (eventDate) { %>
                    <span class="month"><%= eventDate.toLocaleDateString('en-US', { month: 'short' }).toUpperCase() %></span>
                    <span class="day"><%= eventDate.getDate() %></span>
                    <span class="year"><%= eventDate.getFullYear() %></span>
                  <% } else { %>
                    <span class="month">TBD</span>
                  <% } %>
                </div>
                <div class="event-info">
                  <span class="event-type <%= event.eventType ? event.eventType.toLowerCase().replace(/\s+/g, '-') : '' %>"><%= event.eventType || 'Event' %></span>
                  <h3><a href="/events/<%= event.id %>"><%= event.title %></a></h3>
                  <p><%= event.description %></p>
                  <div class="event-details-row">
                    <% if (event.location) { %><span>ğŸ“ <%= event.location %></span><% } %>
                    <% if (eventDate) { %><span>ğŸ• <%= eventDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true }) %></span><% } %>
                    <% if (event.capacity) { %><span>ğŸ‘¥ <%= event.capacity %> spots</span><% } %>
                    <% if (event.recurrence) { %><span>ğŸ”„ <%= event.recurrence %></span><% } %>
                  </div>
                </div>
                <div class="event-actions">
                  <a href="/events/<%= event.id %>" class="btn btn-primary btn-sm">View Details & RSVP</a>
                  <% if (user && user.role === 'manager') { %>
                    <a href="/manage/events/<%= event.id %>/edit" class="btn btn-outline btn-sm">Edit</a>
                  <% } %>
                </div>
              </article>
            <% }) %>
          </div>
        <% } else { %>
          <div class="empty-state">
            <p>No upcoming events at this time. Check back soon!</p>
          </div>
        <% } %>
      </div>
    </section>

<%- include('../partials/footer') %>

