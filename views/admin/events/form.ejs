<%- include('../../partials/header') %>

    <!-- Page Hero -->
    <section class="page-hero">
      <div class="container">
        <p class="eyebrow">Admin</p>
        <h1><%= event ? 'Edit' : 'Create' %> <em>Event</em></h1>
        <p class="page-lead"><%= event ? 'Update event details below.' : 'Fill out the form to create a new event.' %></p>
      </div>
    </section>

    <!-- Event Form -->
    <section class="section">
      <div class="container">
        <div class="form-card">
          <% if (error) { %>
            <div class="alert alert-error" style="margin-bottom: var(--space-xl);">
              <%= error %>
            </div>
          <% } %>

          <form action="<%= event ? '/manage/events/' + event.id : '/manage/events' %>" method="POST" class="crud-form">
            <div class="form-row">
              <div class="form-group">
                <label for="title">Event Title *</label>
                <input type="text" id="title" name="title" class="form-control" value="<%= event ? event.title : '' %>" required>
              </div>
              <div class="form-group">
                <label for="eventType">Event Type *</label>
                <select id="eventType" name="eventType" class="form-control" required>
                  <option value="">Select type...</option>
                  <option value="workshop" <%= event && event.eventType === 'workshop' ? 'selected' : '' %>>Workshop</option>
                  <option value="community" <%= event && event.eventType === 'community' ? 'selected' : '' %>>Community</option>
                  <option value="fundraising" <%= event && event.eventType === 'fundraising' ? 'selected' : '' %>>Fundraising</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="description">Description *</label>
              <textarea id="description" name="description" class="form-control" rows="4" required><%= event ? event.description : '' %></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="eventDate">Start Date *</label>
                <input type="date" id="eventDate" name="eventDate" class="form-control" value="<%= event ? event.eventDate : '' %>" required>
              </div>
              <div class="form-group">
                <label for="eventTime">Start Time *</label>
                <input type="time" id="eventTime" name="eventTime" class="form-control" value="<%= event ? event.eventTime : '' %>" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="eventEndDate">End Date</label>
                <input type="date" id="eventEndDate" name="eventEndDate" class="form-control" value="<%= event ? event.eventEndDate : '' %>">
                <small class="form-help">Optional - leave blank if same as start date</small>
              </div>
              <div class="form-group">
                <label for="eventEndTime">End Time</label>
                <input type="time" id="eventEndTime" name="eventEndTime" class="form-control" value="<%= event ? event.eventEndTime : '' %>">
                <small class="form-help">Optional</small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="location">Location *</label>
                <input type="text" id="location" name="location" class="form-control" value="<%= event ? event.location : '' %>" required>
              </div>
              <div class="form-group">
                <label for="capacity">Capacity *</label>
                <input type="number" id="capacity" name="capacity" class="form-control" value="<%= event ? event.capacity : '' %>" min="1" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="registrationDeadline">Registration Deadline</label>
                <input type="date" id="registrationDeadline" name="registrationDeadline" class="form-control" value="<%= event ? event.registrationDeadline : '' %>">
                <small class="form-help">Optional - deadline for event registration</small>
              </div>
              <div class="form-group">
                <label for="recurrence">Recurrence Pattern</label>
                <select id="recurrence" name="recurrence" class="form-control">
                  <option value="">None (One-time event)</option>
                  <option value="daily" <%= event && event.recurrence === 'daily' ? 'selected' : '' %>>Daily</option>
                  <option value="weekly" <%= event && event.recurrence === 'weekly' ? 'selected' : '' %>>Weekly</option>
                  <option value="monthly" <%= event && event.recurrence === 'monthly' ? 'selected' : '' %>>Monthly</option>
                  <option value="yearly" <%= event && event.recurrence === 'yearly' ? 'selected' : '' %>>Yearly</option>
                </select>
                <small class="form-help">Optional - how often this event repeats</small>
              </div>
            </div>

            <div class="form-actions">
              <a href="/manage/events" class="btn btn-outline">Cancel</a>
              <button type="submit" class="btn btn-primary"><%= event ? 'Update Event' : 'Create Event' %></button>
            </div>
          </form>
        </div>
      </div>
    </section>

<%- include('../../partials/footer') %>

